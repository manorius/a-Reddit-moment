<!DOCTYPE html>
<html>

  <head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Snoocore listings</title>

  <meta name="description" content="Snoocore - A minimal and complete JavaScript driver for the Reddit API">
  <meta name="author" content="Trevor Senior">
  <link rel="canonical" href="http://tsenior.com/snoocore/snoocore/listings.html">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href='//fonts.googleapis.com/css?family=Raleway:400,300,600' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/snoocore/css/normalize.css">
  <link rel="stylesheet" href="/snoocore/css/skeleton.css">
  <link rel="stylesheet" href="/snoocore/css/custom-snoocore.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link rel="icon" type="image/png" href="dist/images/favicon.png"> -->

</head>


  <body>

    <div class="wrapper">
      <div class="sidebar"><ul>
  <li><a href="index.html">Home</a></li>

  <li><a href="features.html">Features</a></li>

  <li>Getting Started
    <ul>
      <li><a href="install.html">Install & Include</a></li>
      <li><a href="basicUsage.html">Basic Usage</a></li>
      <li><a href="config.html">Config Options</a></li>
      <li><a href="commonErrors.html">Common Errors</a></li>
    </ul>
  </li>

  <li><a href="login.html">Login</a>
    <ul>
      <li><a href="oauth.html">OAuth</a></li>
      <ul>
	<li><a href="oauth-script.html">Script</a></li>
	<li><a href="oauth-explicit.html">Explicit</a></li>
	<li><a href="oauth-implicit.html">Implicit</a></li>
      </ul>
  </li>
  <li><a href="cookies.html">Cookie</a></li>
    </ul>
  </li>

  <li>Helpers
    <ul>
      <li><a href="listings.html">Listings</a></li>
    </ul>
  </li>

  <li><a href="events.html">Events</a></li>
  <li><a href="fileUpload.html">File Upload</a></li>
  <li><a href="advancedUsage.html">Advanced Usage</a></li>

  <li>Resources
    <ul>
      <li><a href="migration.html">Migration Guide</a></li>
      <li><a href="tests.html">Running Tests</a></li>
      <li><a href="node-vs-browser.html">Node vs. Browser</a></li>
      <li><a href="promises.html">Promises</a></li>
    </ul>
  </li>

</ul>
</div>
      <div class="my-content"><h1 id="listings">Listings</h1>

<p>From the reddit documentation</p>

<blockquote>
<p>Many endpoints on reddit use the same protocol for controlling pagination and filtering. These endpoints are called Listings and share five common parameters: after / before, limit, count, and show.</p>
</blockquote>

<p>Along side the basic HTTP verbs to call the reddit API (See <a href="basicUsage.html">Basic Usage</a>), there is a <code>.listing</code> helper for endpoints that return listings.</p>

<p>Quick Example (<a href="http://www.reddit.com/dev/api#GET_hot">GET /r/hot</a>):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">reddit</span><span class="p">(</span><span class="s1">&#39;/r/hot&#39;</span><span class="p">).</span><span class="nx">listing</span><span class="p">({</span> 
    <span class="c1">// Any parameters for the endpoints can be used here as usual.</span>
    <span class="c1">// In this case, we specify a limit of 10 children per slice</span>
    <span class="nx">limit</span><span class="o">:</span> <span class="mi">10</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">children</span><span class="p">);</span> <span class="c1">// The children that are not stickied</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">stickied</span><span class="p">);</span> <span class="c1">// The children that are stickied</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">before</span><span class="p">);</span> <span class="c1">// null</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">after</span><span class="p">);</span> <span class="c1">// String - fullname anchor</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span> <span class="c1">// will be 0 (see below)</span>
<span class="p">});</span>
</code></pre></div>
<p>To get the next or previous slices in a listing, call <code>next()</code> or <code>previous()</code> on the current slice:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">reddit</span><span class="p">(</span><span class="s1">&#39;/r/hot&#39;</span><span class="p">).</span><span class="nx">listing</span><span class="p">({</span> <span class="nx">limit</span><span class="o">:</span> <span class="mi">10</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">children</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span> <span class="c1">// 0</span>
    <span class="k">return</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// the next slice</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">children</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">slice</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span> <span class="c1">// 10</span>
<span class="p">});</span>
</code></pre></div>
<p>For full working examples checkout the <a href="https://github.com/trevorsenior/snoocore/tree/master/examples">examples on GitHub</a></p>

<hr>

<h2 id="slice-attributes">Slice attributes</h2>

<h3 id="slice.children"><code>slice.children</code></h3>

<p>The children in a slice.</p>

<h3 id="slice.stickied"><code>slice.stickied</code></h3>

<p>The stickied children in this slice. This will usually only be populated in the first slice in a listing (e.g. a listing for a subreddit)</p>

<h3 id="slice.allchildren"><code>slice.allChildren</code></h3>

<p>Gives back a list of the stickied children and the non-stickied children (does not separate them out).</p>

<h3 id="slice.empty"><code>slice.empty</code></h3>

<p>Boolean determining if a slice returned no results. The value is true when <code>slice.allChildren</code> is empty and false otherwise. Useful for determining the end of a listing.</p>

<h3 id="slice.count"><code>slice.count</code></h3>

<p>The count of the number of children that have loaded for this slice. If the listing limit is 25 (the default), the first slice will have a count of <code>0</code>, the next slice will have a count of <code>25</code> and so on. <code>slice.count</code> does <em>not</em> take into consideration stickied children.</p>

<h3 id="slice.before"><code>slice.before</code></h3>

<p>The <code>before</code> fullname.</p>

<h3 id="slice.after"><code>slice.after</code></h3>

<p>The <code>after</code> fullname. </p>

<h3 id="slice.get"><code>slice.get</code></h3>

<p>Should rarely be needed. This is the raw API response from reddit (as if you called <code>.get</code> instead of <code>.listing</code>) for this slice.</p>

<h2 id="slice-functions">Slice functions</h2>

<h3 id="slice.next()"><code>slice.next()</code></h3>

<p>Get a promise for the next slice in a listing.</p>

<h3 id="slice.previous()"><code>slice.previous()</code></h3>

<p>Get a promise for the previous slice in a listing.</p>

<h3 id="slice.start()"><code>slice.start()</code></h3>

<p>Get a promise for the first slice in a listing. Useful for going back to the beginning of a listing.</p>

<h3 id="slice.requery()"><code>slice.requery()</code></h3>

<p>Get a promise for the same slice. Useful if you&#39;ve modified (removed, edited, etc.) some content from a listing and need to requery for the slice of data.</p>

<h2 id="multiple-listings">Multiple listings</h2>

<p>Some endpoints return multiple listings. Use the <a href="callContextOptions.html">call context option</a> <code>listingIndex</code> to specify which listing to actually use in the returned result:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">reddit</span><span class="p">(</span><span class="s1">&#39;duplicates/$article&#39;</span><span class="p">).</span><span class="nx">listing</span><span class="p">({</span> 
  <span class="nx">limit</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span> 
  <span class="nx">$article</span><span class="o">:</span> <span class="s1">&#39;13wml3&#39;</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">listingIndex</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">slice</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">// slice is now the second listing in the given array from the duplicates endpoint</span>
<span class="p">});</span>
</code></pre></div></div>
    </div>

  </body>
</html>
